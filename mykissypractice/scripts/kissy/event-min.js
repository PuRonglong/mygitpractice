/*
Copyright 2012, KISSY UI Library v1.20
MIT Licensed
build time: Sep 17 12:20
*/
KISSY.add("event/base",function(g,d,b,a,k){function f(c,a){var i=q._data(c);return(i&&i.events||{})[a]||[]}function j(c,a){for(var i=f(c,a.type).slice(0),b,d,n=0,e=i.length;n<e&&!(b=i[n],b=b.fn.call(b.scope||c,a,b.data),b!==k&&(!1!==d&&(d=b),!1===b&&a.halt()),a.isImmediatePropagationStopped);++n);return d}function e(c,a,b,i,d){var f=u[a]||{};!i.length&&(!f.setup||!1===f.setup.call(c))&&r(c,a,b);f.add&&f.add.call(c,d)}var l=a.isValidTarget,c=a.isIdenticalHandler,i=a.batchForType,m=a.simpleRemove,r=
a.simpleAdd,h=a.splitAndRun,o=d._nodeName,n=g.makeArray,p=g.each,t=g.trim,s="",w="trigger-none-"+g.now(),u={},v="ksEventTargetId"+g.now(),q={_clone:function(c,a){if(a.nodeType===d.ELEMENT_NODE&&q._hasData(c)){var b=q._data(c).events;p(b,function(c,b){p(c,function(c){q.on(a,b,c.fn,c.scope,c.data)})})}},_hasData:function(c){return d.hasData(c,v)},_data:function(c){var a=n(arguments);a.splice(1,0,v);return d.data.apply(d,a)},_removeData:function(c){var a=n(arguments);a.splice(1,0,v);return d.removeData.apply(d,
a)},special:u,__add:function(a,i,f,d,n,k){var h;if(i&&g.isFunction(d)&&(!a||l(i))){(h=q._data(i))||q._data(i,h={});var m=h.events=h.events||{},m=m[f]=m[f]||[],d={fn:d,scope:n,data:k},p=h.handler;p||(p=h.handler=function(c,a){if(!(c&&c.type==s)){var i=p.target;if(!c||!c.fixed)c=new b(i,c);var d=c.type;g.isPlainObject(a)&&g.mix(c,a);d&&(c.type=d);return j(i,c)}},p.target=i);for(h=m.length-1;0<=h;--h)if(c(m[h],d,i))return;a&&(e(i,f,p,m,d),i=null);m.push(d)}},add:function(c,a,b,f,n){a=t(a);if(i(q,"add",
c,a,b,f,n))return c;d.query(c).each(function(c){q.__add(!0,c,a,b,f,n)});return c},__remove:function(a,i,b,d,f,n){if(i&&(!a||l(i))){var h=q._data(i),e=h&&h.events,j,p,r,o=a&&u[b]||{};if(e)if(b){if(j=e[b]){p=j.length;if(d&&p){var t={data:n,fn:d,scope:f},s,n=f=0;for(r=[];f<p;++f)s=j[f],c(s,t,i)?o.remove&&o.remove.call(i,s):r[n++]=s;e[b]=r;p=r.length}if(d===k||0===p)a&&(!o.tearDown||!1===o.tearDown.call(i))&&m(i,b,h.handler),delete e[b]}g.isEmptyObject(e)&&(h.handler.target=null,delete h.handler,delete h.events,
q._removeData(i))}else for(b in e)q.__remove(a,i,b)}},remove:function(c,a,b,f,n){a=t(a);if(i(q,"remove",c,a,b,f))return c;d.query(c).each(function(c){q.__remove(!0,c,a,b,f,n)});return c},_handle:j,fire:function(c,a,i,f){var n=!0,a=t(a);if(-1<a.indexOf(" "))return h(a,function(a){n=q.fire(c,a,i,f)&&n}),n;i=i||{};i.type=a;d.query(c).each(function(c){var d=a,h=i;if(l(c)){var e,m=!0;h instanceof b?e=h:(e=new b(c,k,d),g.mix(e,h));e.type=d;f&&e.halt();var h=c,p="on"+d;do e.currentTarget=h,j(h,e),h[p]&&
!1===h[p].call(h)&&e.preventDefault(),h=h.parentNode||h.ownerDocument||h===c.ownerDocument&&window;while(h&&!e.isPropagationStopped);if(e.isDefaultPrevented)m=!1;else if(!("click"===d&&o(c,"a"))){var r;try{p&&c[d]&&((r=c[p])&&(c[p]=null),s=d,c[d]())}catch(t){}r&&(c[p]=r);s=w}c=m}else c=!1;n=c&&n});return n}};q.__getListeners=f;q.on=q.add;q.detach=q.remove;return q},{requires:["dom","./object","./utils"]});
KISSY.add("event/change",function(g,d,b,a){g=document.documentMode;if(d.ie&&(9>d.ie||g&&9>g)){var k=/^(?:textarea|input|select)$/i,f=function(c){c=c.type;return"checkbox"==c||"radio"==c};b.special.change={setup:function(){if(k.test(this.nodeName))if(f(this))b.on(this,"propertychange",j),b.on(this,"click",e);else return!1;else b.on(this,"beforeactivate",l)},tearDown:function(){if(k.test(this.nodeName))if(f(this))b.remove(this,"propertychange",j),b.remove(this,"click",e);else return!1;else b.remove(this,
"beforeactivate",l),a.query("textarea,input,select",this).each(function(a){a.__changeHandler&&(a.__changeHandler=0,b.remove(a,"change",c))})}};var j=function(c){"checked"==c.originalEvent.propertyName&&(this.__changed=1)},e=function(c){this.__changed&&(this.__changed=0,b.fire(this,"change",c))},l=function(a){a=a.target;k.test(a.nodeName)&&!a.__changeHandler&&(a.__changeHandler=1,b.on(a,"change",c))},c=function(c){if(!f(this)){var a;(a=this.parentNode)&&b.fire(a,"change",c)}}}},{requires:["ua","./base",
"dom"]});
KISSY.add("event/delegate",function(g,d,b,a){function k(c,a){if(void 0===c.fn&&void 0===c.selector)return!0;if(void 0===c.fn)return this.selector==c.selector;var b=this.scope||a,d=c.scope||a;return this.fn==c.fn&&this.selector==c.selector&&b==d}function f(c,a){var b=d.closest(c.target,[a.selector],this);if(b){for(var f=c.currentTarget,h=0;h<b.length&&!(c.currentTarget=b[h],!1===a.fn.call(a.scope||this,c)&&c.halt(),c.isPropagationStopped);h++);c.currentTarget=f}}function j(c,a){var b,f=c.target,h=
c.relatedTarget;c.type=a.preType;if((f=d.closest(f,a.selector,this))&&f!==h&&(!h||!d.contains(f,h)))h=c.currentTarget,c.currentTarget=f,b=a.fn.call(a.scope||this,c),c.currentTarget=h;return b}var e=a.batchForType,l={focus:{type:"focusin"},blur:{type:"focusout"},mouseenter:{type:"mouseover",handler:j},mouseleave:{type:"mouseout",handler:j}};g.mix(b,{delegate:function(c,a,j,g,h){if(e(b,"delegate",c,a,j,g,h))return c;d.query(c).each(function(c){var d=a,e=f;l[a]&&(a=l[d].type,e=l[d].handler||e);b.on(c,
a,e,c,{fn:g,selector:j,preType:d,scope:h,equals:k})});return c},undelegate:function(c,a,j,g,h){if(e(b,"undelegate",c,a,j,g,h))return c;d.query(c).each(function(c){var d=a,e=f;l[a]&&(a=l[d].type,e=l[d].handler||e);b.remove(c,a,e,c,{fn:g,selector:j,preType:d,scope:h,equals:k})});return c}});return b},{requires:["dom","./base","./utils"]});
KISSY.add("event/focusin",function(g,d,b){d.ie||g.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(a){function d(f){return b.fire(f.target,a.name)}var f=0;b.special[a.name]={setup:function(){0===f++&&document.addEventListener(a.fix,d,!0)},tearDown:function(){0===--f&&document.removeEventListener(a.fix,d,!0)}}});return b},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(g,d,b,a){var k=document,a=k.documentMode||a.ie;if(!("onhashchange"in window)||a&&8>a){var f=window,j="<html><head><title>"+(k.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",e=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},l,c,i=function(){var a=e();a!==c&&(c=a,m(a));l=setTimeout(i,50)},m=a&&8>a?function(a){var a=g.substitute(j,{hash:g.escapeHTML(a),head:b._isCustomDomain()?"<script>document.domain = '"+k.domain+"';<\/script>":
""}),c=o.contentWindow.document;try{c.open(),c.write(a),c.close()}catch(d){}}:function(){d.fire(f,"hashchange")},r=function(){l||i()},h=function(){l&&clearTimeout(l);l=0},o;8>a&&(r=function(){if(!o){var a=b._genEmptyIframeSrc();o=b.create("<iframe "+(a?'src="'+a+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');b.prepend(o,k.documentElement);d.add(o,"load",function(){d.remove(o,"load");m(e());d.add(o,"load",h);i()});k.onpropertychange=function(){try{"title"===event.propertyName&&
(o.contentWindow.document.title=k.title+" - "+e())}catch(a){}};var h=function(){var a=g.trim(o.contentWindow.document.body.innerText),b=e();a!=b&&(c=location.hash=a);d.fire(f,"hashchange")}}},h=function(){l&&clearTimeout(l);l=0;d.detach(o);b.remove(o);o=0});d.special.hashchange={setup:function(){if(this===f){c=e();r()}},tearDown:function(){this===f&&h()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/keycodes",function(){return{MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,
WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,
MAC_FF_META:224,WIN_IME:229}});KISSY.add("event/mouseenter",function(g,d,b,a){a.ie||g.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(a){function f(f){var e=f.relatedTarget;f.type=a.name;try{if(!e||e===document||e.parentNode)e!==this&&(!e||!b.contains(this,e))&&d._handle(this,f)}catch(g){}}d.special[a.name]={setup:function(){d.add(this,a.fix,f)},tearDown:function(){d.remove(this,a.fix,f)}}});return d},{requires:["./base","dom","ua"]});
KISSY.add("event/mousewheel",function(g,d,b,a,k){function f(a){var b,f,e,h=a.detail;a.wheelDelta&&(e=a.wheelDelta/120);a.detail&&(e=-(0==h%3?h/3:h));void 0!==a.axis&&(a.axis===a.HORIZONTAL_AXIS?(f=0,b=-1*e):a.axis===a.VERTICAL_AXIS&&(b=0,f=e));void 0!==a.wheelDeltaY&&(f=a.wheelDeltaY/120);void 0!==a.wheelDeltaX&&(b=-1*a.wheelDeltaX/120);!b&&!f&&(f=e);a=new k(this,a);g.mix(a,{deltaY:f,delta:e,deltaX:b,type:"mousewheel"});return d._handle(this,a)}var j=b.gecko?"DOMMouseScroll":"mousewheel",e=a.simpleRemove,
l=a.simpleAdd;d.special.mousewheel={setup:function(){var a;a=d._data(this)[a]=g.bind(f,this);l(this,j,a)},tearDown:function(){var a,b=d._data(this);a=b[a];e(this,j,a);delete b[a]}}},{requires:["./base","ua","./utils","./object"]});
KISSY.add("event/object",function(g,d){function b(a,b,d){this.currentTarget=a;this.originalEvent=b||{};b?(this.type=b.type,this._fix()):(this.type=d,this.target=a);this.currentTarget=a;this.fixed=!0}var a=document,k="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which,axis".split(",");g.augment(b,
{_fix:function(){for(var b=this.originalEvent,j=k.length,e,g=this.currentTarget,g=9===g.nodeType?g:g.ownerDocument||a;j;)e=k[--j],this[e]=b[e];this.target||(this.target=this.srcElement||a);3===this.target.nodeType&&(this.target=this.target.parentNode);!this.relatedTarget&&this.fromElement&&(this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement);this.pageX===d&&this.clientX!==d&&(b=g.documentElement,j=g.body,this.pageX=this.clientX+(b&&b.scrollLeft||j&&j.scrollLeft||0)-
(b&&b.clientLeft||j&&j.clientLeft||0),this.pageY=this.clientY+(b&&b.scrollTop||j&&j.scrollTop||0)-(b&&b.clientTop||j&&j.clientTop||0));this.which===d&&(this.which=this.charCode===d?this.keyCode:this.charCode);this.metaKey===d&&(this.metaKey=this.ctrlKey);!this.which&&this.button!==d&&(this.which=this.button&1?1:this.button&2?3:this.button&4?2:0)},preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=!1;this.isDefaultPrevented=!0},stopPropagation:function(){var a=
this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.isPropagationStopped=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=!0;this.stopPropagation()},halt:function(a){a?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return b});
KISSY.add("event/submit",function(g,d,b,a){g=document.documentMode;if(d.ie&&(9>d.ie||g&&9>g)){var k=a._nodeName;b.special.submit={setup:function(){if(k(this,"form"))return!1;b.on(this,"click keypress",f)},tearDown:function(){if(k(this,"form"))return!1;b.remove(this,"click keypress",f);a.query("form",this).each(function(a){a.__submit__fix&&(a.__submit__fix=0,b.remove(a,"submit",j))})}};var f=function(a){a=a.target;if((a=k(a,"input")||k(a,"button")?a.form:null)&&!a.__submit__fix)a.__submit__fix=1,b.on(a,
"submit",j)},j=function(a){this.parentNode&&b.fire(this.parentNode,"submit",a)}}},{requires:["ua","./base","dom"]});
KISSY.add("event/target",function(g,d,b,a,k){function f(a,c,d){if(d instanceof b)return d.currentTarget=a,d;a=new b(a,k,c);g.isPlainObject(d)&&g.mix(a,d);a.type=c;return a}function j(a){a[i]=a[i]||{};return a[i]}function e(a){a[h]=a[h]||{};return a[h]}function l(a,c){var b=j(a);return b[c]&&b[c].bubbles||b[o]&&b[o].bubbles}function c(a){return function(c,b,f){var h=this,c=m(c);r(c,function(c){d["__"+a](!1,h,c,b,f)});return h}}var i="__~ks_publish",m=g.trim,r=a.splitAndRun,h="__~ks_bubble_targets",
o="*",a={fire:function(a,c){var b=this,h,e,g,a=m(a);if(0<a.indexOf(" "))return r(a,function(a){e=b.fire(a,c);!1===e&&(h=!1)}),h;c&&(c.type=a);g=f(b,a,c);h=d._handle(b,g);!g.isPropagationStopped&&l(b,a)&&(e=b.bubble(a,g),!1!==h&&(h=e));return h},publish:function(a,c){var b=j(this);(a=m(a))&&(b[a]=c)},bubble:function(a,c){var b,d=e(this);g.each(d,function(d){d=d.fire(a,c);!1!==b&&(b=d)});return b},addTarget:function(a){e(this)[g.stamp(a)]=a},removeTarget:function(a){delete e(this)[g.stamp(a)]},on:c("add")};
a.detach=c("remove");return a},{requires:["./base","./object","./utils"]});
KISSY.add("event/utils",function(g,d){var b=document;return{splitAndRun:function(a,b){g.each(a.split(/\s+/),b)},batchForType:function(a,b,d,j){if(j&&0<j.indexOf(" ")){var e=g.makeArray(arguments);g.each(j.split(/\s+/),function(g){var c=[].concat(e);c.splice(0,4,d,g);a[b].apply(a,c)});return!0}return 0},isValidTarget:function(a){return a&&a.nodeType!==d.TEXT_NODE&&a.nodeType!==d.COMMENT_NODE},isIdenticalHandler:function(a,b,d){var g=a.scope||d,e=1,l=b.scope||d;if(a.fn!==b.fn||g!==l)e=0;else if((a=
a.data)!==(b=b.data))!a&&b||a&&!b?e=0:a&&b&&a.equals&&b.equals&&(a.equals(b,d)||(e=0));return e},simpleAdd:b.addEventListener?function(a,b,d,g){a.addEventListener&&a.addEventListener(b,d,!!g)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},simpleRemove:b.removeEventListener?function(a,b,d,g){a.removeEventListener&&a.removeEventListener(b,d,!!g)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)}}},{requires:["dom"]});
KISSY.add("event/valuechange",function(g,d,b){function a(a){b.removeData(a,i);if(b.hasData(a,m)){var c=b.data(a,m);clearTimeout(c);b.removeData(a,m)}}function k(b){a(b.target)}function f(a){b.hasData(a,m)||b.data(a,m,setTimeout(function(){var c=a.value,e=b.data(a,i);c!==e&&(d.fire(a,l,{prevVal:e,newVal:c},!0),b.data(a,i,c));b.data(a,m,setTimeout(arguments.callee,r))},r))}function j(a){var c=a.target;"focus"==a.type&&b.data(c,i,c.value);f(c)}function e(b){a(b);d.remove(b,"blur",k);d.remove(b,"mousedown keyup keydown focus",
j)}var l="valuechange",c=b._nodeName,i="event/valuechange/history",m="event/valuechange/poll",r=50;d.special[l]={setup:function(){if(c(this,"input")||c(this,"textarea"))e(this),d.on(this,"blur",k),d.on(this,"mousedown keyup keydown focus",j)},tearDown:function(){e(this)}};return d},{requires:["./base","dom"]});KISSY.add("event",function(g,d,b,a,k){b.KeyCodes=d;b.Target=a;b.Object=k;return b},{requires:"event/keycodes,event/base,event/target,event/object,event/focusin,event/hashchange,event/valuechange,event/delegate,event/mouseenter,event/submit,event/change,event/mousewheel".split(",")});
