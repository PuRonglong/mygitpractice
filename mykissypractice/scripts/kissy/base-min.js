/*
Copyright 2012, KISSY UI Library v1.20
MIT Licensed
build time: Jun 13 20:26
*/
KISSY.add("base/attribute",function(f,i){function l(a,b,c,d,f,j,e){e=e||c;return a.fire(b+(c.charAt(0).toUpperCase()+c.substring(1))+"Change",{attrName:e,subAttrName:j,prevVal:d,newVal:f})}function h(a,b,c){var d=a[b]||{};c&&(a[b]=d);return d}function e(a){return h(a,"__attrs",!0)}function m(a){return h(a,"__attrVals",!0)}function q(a,b){for(var c=0,d=b.length;a!=i&&c<d;c++)a=a[b[c]];return a}function n(a,b,c,d,e){var d=d||{},j,g,k;k=a.hasAttr(b);var h=b;!k&&-1!==b.indexOf(".")&&(j=b.split("."),b=
j.shift());k=a.get(b);j&&(g=q(k,j));if(!(!j&&k===c||j&&g===c)){if(j){var o=g=f.clone(k),n=j.length-1;if(0<=n){for(var p=0;p<n;p++)o=o[j[p]];o!=i&&(o[j[p]]=c)}c=g}if(!d.silent&&!1===l(a,"before",b,k,c,h))return!1;c=a.__set(b,c);if(!1===c)return c;d.silent||(c=m(a)[b],l(a,"after",b,k,c,h),e?e.push({prevVal:k,newVal:c,attrName:b,subAttrName:h}):l(a,"","*",[k],[c],[h],[b]));return a}}function g(){}g.INVALID={};var r=g.INVALID;f.augment(g,{getAttrs:function(){return e(this)},getAttrVals:function(){var a=
{},b,c=e(this);for(b in c)a[b]=this.get(b);return a},addAttr:function(a,b,c){var d=e(this),b=f.clone(b);d[a]?f.mix(d[a],b,c):d[a]=b;return this},addAttrs:function(a,b){var c=this;f.each(a,function(a,b){c.addAttr(b,a)});b&&c.set(b);return c},hasAttr:function(a){return a&&e(this).hasOwnProperty(a)},removeAttr:function(a){this.hasAttr(a)&&(delete e(this)[a],delete m(this)[a]);return this},set:function(a,b,c){var d;if(f.isPlainObject(a)){var e=a,a=0;d=!0;c=b;b=[];for(a in e)if(d=n(this,a,e[a],c,b),!1===
d)break;var j=[],g=[],h=[],i=[];f.each(b,function(a){g.push(a.prevVal);h.push(a.newVal);j.push(a.attrName);i.push(a.subAttrName)});j.length&&l(this,"","*",g,h,i,j);return d}return n(this,a,b,c)},__set:function(a,b){var c,d=h(e(this),a,!0),g=d.validator,d=d.setter;if((g=f.isString(g)?this[g]:g)&&!1===g.call(this,b,a))return!1;if(d=f.isString(d)?this[d]:d)c=d.call(this,b,a);if(c===r)return!1;c!==i&&(b=c);m(this)[a]=b},get:function(a){var b,c,d;!this.hasAttr(a)&&-1!==a.indexOf(".")&&(b=a.split("."),
a=b.shift());c=h(e(this),a).getter;d=a in m(this)?m(this)[a]:this.__getDefAttrVal(a);if(c=f.isString(c)?this[c]:c)d=c.call(this,d,a);b&&(d=q(d,b));return d},__getDefAttrVal:function(a){var b=h(e(this),a),c;if(c=f.isString(b.valueFn)?this[b.valueFn]:b.valueFn)c=c.call(this),c!==i&&(b.value=c),delete b.valueFn,e(this)[a]=b;return b.value},reset:function(a,b){if(f.isString(a))return this.hasAttr(a)?this.set(a,this.__getDefAttrVal(a),b):this;var b=a,c=e(this),d={};for(a in c)d[a]=this.__getDefAttrVal(a);
this.set(d,b);return this}});i&&(g.prototype.addAttrs=i);return g});KISSY.add("base/base",function(f,i,l){function h(e){for(var f=this.constructor;f;){var h=f.ATTRS;if(h){var i=void 0;for(i in h)h.hasOwnProperty(i)&&this.addAttr(i,h[i],!1)}f=f.superclass?f.superclass.constructor:null}if(e)for(var g in e)e.hasOwnProperty(g)&&this.__set(g,e[g])}f.augment(h,l.Target,i);return h},{requires:["./attribute","event"]});KISSY.add("base",function(f,i,l){i.Attribute=l;return i},{requires:["base/base","base/attribute"]});
