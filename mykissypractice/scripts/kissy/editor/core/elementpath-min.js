KISSY.Editor.add("elementpath",function(f){function i(a){var b=g,c=g,j=[];for(a=a;a;){if(a[0].nodeType==k.NODE_ELEMENT){if(!this.lastElement)this.lastElement=a;var e=a._4e_name();if(!c){if(!b&&n[e])b=a;if(o[e]){var d;if(d=!b){if(d=e=="div"){a:{d=a;d=l._4e_unwrap(d);d=d.childNodes;for(var h=0,p=d.length;h<p;h++){var m=d[h];if(m.nodeType==k.NODE_ELEMENT&&q.$block[m.nodeName.toLowerCase()]){d=true;break a}}d=false}d=!d}d=d}if(d)b=a;else c=a}}j.push(a);if(e=="body")break}a=a.parent()}this.block=b;this.blockLimit=
c;this.elements=j}var l=KISSY.DOM,q=f.XHTML_DTD,k=f.NODE,g=null,n={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1},o={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1};i.prototype={compare:function(a){var b=this.elements;a=a&&a.elements;if(!a||b.length!=a.length)return false;for(var c=0;c<b.length;c++)if(!l._4e_equals(b[c],a[c]))return false;return true},contains:function(a){for(var b=this.elements,c=0;c<b.length;c++)if(b[c]._4e_name()in a)return b[c];
return g},toString:function(){var a=this.elements,b,c=[];for(b=0;b<a.length;b++)c.push(a[b]._4e_name());return c.toString()}};f.ElementPath=i});
