KISSY.Editor.add("htmlparser-htmlwriter",function(){function h(){h.superclass.constructor.call(this);this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.forceSimpleAmpersand=d;this.sortAttributes=c;this._.indent=d;this._.indentation="";this._.rules={};var b=f.XHTML_DTD,a;for(a in g.mix({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:c,breakBeforeOpen:c,breakAfterOpen:c,breakBeforeClose:!b[a]["#"],breakAfterClose:c});this.setRules("br",
{breakAfterOpen:c});this.setRules("title",{indent:d,breakAfterOpen:d});this.setRules("style",{indent:d,breakBeforeClose:c});this.setRules("pre",{indent:d})}var i=KISSY,f=i.Editor,g=f.Utils,c=true,d=false;i.extend(h,f.HtmlParser.BasicWriter,{openTag:function(b){var a=this._.rules[b];if(this._.indent)this.indentation();else if(a&&a.breakBeforeOpen){this.lineBreak();this.indentation()}this._.output.push("<",b)},openTagClose:function(b,a){var e=this._.rules[b];if(a)this._.output.push(this.selfClosingEnd);
else{this._.output.push(">");if(e&&e.indent)this._.indentation+=this.indentationChars}e&&e.breakAfterOpen&&this.lineBreak()},attribute:function(b,a){if(typeof a=="string"){this.forceSimpleAmpersand&&(a=a.replace(/&amp;/g,"&"));a=g.htmlEncodeAttr(a)}this._.output.push(" ",b,'="',a,'"')},closeTag:function(b){var a=this._.rules[b];if(a&&a.indent)this._.indentation=this._.indentation.substr(this.indentationChars.length);if(this._.indent)this.indentation();else if(a&&a.breakBeforeClose){this.lineBreak();
this.indentation()}this._.output.push("</",b,">");a&&a.breakAfterClose&&this.lineBreak()},text:function(b){if(this._.indent){this.indentation();b=g.ltrim(b)}this._.output.push(b)},comment:function(b){this._.indent&&this.indentation();this._.output.push("<!--",b,"--\>")},lineBreak:function(){this._.output.length>0&&this._.output.push(this.lineBreakChars);this._.indent=c},indentation:function(){this._.output.push(this._.indentation);this._.indent=d},setRules:function(b,a){var e=this._.rules[b];if(e)g.mix(e,
a);else this._.rules[b]=a}});f.HtmlParser.HtmlWriter=h});
