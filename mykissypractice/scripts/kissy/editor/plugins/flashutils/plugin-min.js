KISSY.Editor.add("flashutils",function(){var g=KISSY,p=g.Editor,n=p.Utils.flash;if(n)g.log("flashUtils attach more");else{var h=g.DOM,q=g.Node,s=g.UA;n={getUrl:function(b){var c="",d=p.NODE;if(b._4e_name()=="object"){b=b[0].childNodes;for(var a=0;a<b.length;a++)if(b[a].nodeType==d.NODE_ELEMENT)if((h.attr(b[a],"name")||"").toLowerCase()=="movie")c=h.attr(b[a],"value");else if(h._4e_name(b[a])=="embed")c=h.attr(b[a],"src");else if(h._4e_name(b[a])=="object")c=h.attr(b[a],"data")}else if(b._4e_name()==
"embed")c=b.attr("src");return c},createSWF:function(b,c,d){var a=c.attrs||{},i=c.flashVars,j="",m="";c=c.params||{};var e="";d=d||document;g.mix(a,{wmode:"transparent"});for(var f in a)if(a.hasOwnProperty(f))j+=f+"='"+a[f]+"' ";g.mix(c,{quality:"high",movie:b,wmode:"transparent"});for(var k in c)if(c.hasOwnProperty(k))m+="<param name='"+k+"' value='"+c[k]+"'/>";if(i){for(var l in i)if(i.hasOwnProperty(l))e+="&"+l+"="+encodeURIComponent(i[l]);e=e.substring(1)}b="<object "+j+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+
m+(e?'<param name="flashVars" value="'+e+'"/>':"")+"<embed "+j+" "+(e?'FlashVars="'+e+'"':"")+' pluginspage="http://www.macromedia.com/go/getflashplayer"  quality="high"  src="'+b+'"  type="application/x-shockwave-flash"/></object>';return{el:new q(b,null,d),html:b}},createSWFRuntime2:function(b,c,d){d=d||document;var a=(new q("<div style='width:0;height:0;overflow:hidden;'>",null,d)).appendTo(d.body);a=n.createSWF.apply(this,arguments).el.appendTo(a);s.ie||(a=a.one("object"));return a[0]},createSWFRuntime:function(b,
c,d){var a=c.attrs||{},i=c.flashVars||{},j=c.params||{},m="",e="",f="";d=d||document;a.id=a.id||g.guid("ke-runtimeflash-");for(var k in a)if(a.hasOwnProperty(k))m+=k+"='"+a[k]+"' ";for(var l in j)if(j.hasOwnProperty(l))e+="<param name='"+l+"' value='"+j[l]+"'/>";for(var r in i)if(i.hasOwnProperty(r))f+="&"+r+"="+encodeURIComponent(i[r]);f=f.substring(1);b=s.ie?"<object "+m+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+e+'<param name="movie" value="'+b+'" />'+(f?'<param name="flashVars" value="'+
f+'" />':"")+"</object>":"<object type='application/x-shockwave-flash' data='"+b+"' "+m+">"+e+(f?'<param name="flashVars" value="'+f+'"/>':"")+"</object>";var o=c.holder;if(!o){o=(new q("<div style='"+(c.style?c.style:"width:1px;height:1px;position:absolute;"+ +"overflow:hidden;")+"'>",null,d)).appendTo(d.body);setTimeout(function(){o.offset({left:h.scrollLeft(),top:h.scrollTop()})},100)}o.html(b);return d.getElementById(a.id)}};p.Utils.flash=n}},{attach:false});
